{% extends 'site/base.html.twig' %}

{% block title %}Hello SiteController!{% endblock %}

{% block body %}
    

    <div class="row justify-content-around">
        <h1 class="col-12 text-center my-5 h1">Calculs distances</h1>
            <div class="card col-5 text-center py-5">
                <div class="form-group">
                        {# on affiche le formulaire #}
                        {{ form_start(form) }}
                            {{ form_widget(form) }}
                            <div class="col-12 text-center mt-5">
                                <button class="btn btn-lg btn-primary" type="submit">Calculer</button>
                                <a class="btn btn-lg btn-warning" href="{{ path('app_site_calcul_distance') }}">Reset</a>
                            </div>
                        {{ form_end(form) }}
                </div>
            </div>
        {# s'il y a une recherche #}
        {% if datas | length > 0 %}
            <div class="card col-6 text-center d-flex flex-column justify-content-around">
                <table class="table text-center align-middle">
                    <thead>
                        <th>Centre</th>
                        <th>Distance</th>
                        <th>Temps de trajet</th>
                    </thead>
                    <tbody class="table-distance">
                        {% for key,data in datas %}
                            {% set dureeEnSecondes = data.duration %}
                            {% set hours = (dureeEnSecondes / 3600) %60 | round %}
                            {% set minutes = (dureeEnSecondes / 60) %60 | round %}
                            <tr>
                                <td>{{ shops[key].name }}</td>
                                <td>{{ data.distance / 1000 }} KMS</td>
                                <td>
                                    {% if hours > 0 %}
                                        {{ hours }} H
                                    {% endif %}
                                    {{ minutes }} min
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        {% else %}
            <div class="card col-6 text-center d-flex flex-column justify-content-around">
            En attente du lieu d'intervention...
            </div>
        {% endif %}
    </div>



{% endblock %}
